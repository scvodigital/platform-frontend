<script>
$(document).ready(function() {
{{#if data.auth}}
  var recentlyViewed = goodmoves.getCookie('recently_viewed') || '';
  // console.log('Recently Viewed:', recentlyViewed, '| Vacancy Id:', vacancyId);
  recentlyViewed = recentlyViewed.split(',');
  recentlyViewed.unshift(vacancyId);
  var newRecentlyViewed = [];
  for (var i = 0; i < Math.min(recentlyViewed.length, 10); ++i) {
    var item = recentlyViewed[i];
    if (item && newRecentlyViewed.indexOf(item) === -1) {
      newRecentlyViewed.push(item);
    }
  };
  newRecentlyViewed = newRecentlyViewed.join(',');
  // console.log('New Recently Viewed:', newRecentlyViewed);
  goodmoves.setCookie('recently_viewed', newRecentlyViewed, 7);
{{/if}}

  var downloads = [].slice.call(document.querySelectorAll);
  $('[href*="goodmoves-files"]').on('click', function(evt) {
    var url = $(evt.currentTarget).attr('href');
    var parts = url.split('/');
    var filename = parts[parts.length - 1];

    gtag('event', 'document_hit', {
      'event_category': 'goodmoves-vacancy',
      'event_label': vacancyId,
      'hit_type': filename
    });
  });
});
</script>
