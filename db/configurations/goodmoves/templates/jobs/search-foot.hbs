<script src="https://cdnjs.cloudflare.com/ajax/libs/typeahead.js/0.11.1/typeahead.bundle.min.js"></script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBJdxcQpVKQ6HdrjnPXycUoZqsmp-Ep3l0&libraries=places&region=uk&callback=initMap" async defer></script>
<script>
var terms = {
  sectors: [
    {{#each data.terms.types.aggregations.sectors.buckets ~}}
    { field: 'sectors', term: {{{stringify key}}} },
    {{/each ~}}
  ],
  roles: [
    {{#each data.terms.types.aggregations.roles.buckets ~}}
    { field: 'roles', term: {{{stringify key}}} },
    {{/each ~}}
  ],
  role_status: [
    {{#each data.terms.types.aggregations.role_status.buckets ~}}
    { field: 'role_status', term: {{{stringify key}}} },
    {{/each ~}}
  ]
};
var mapResults = [
    {{#each data.search_data.map_results.hits.hits}}
    {
      "Id": {{{stringify _id}}},
      "geo_vacancy_coords": {{{stringify _source.geo_vacancy_coords}}},
      "title": {{{stringify _source.title}}},
      "info_window": {{{stringify (component "vacancy_map" _source)}}}
    }{{#unless @last}},{{/unless}}
    {{/each}}
];
</script>
