<div class="splash-image splash-image-{{primaryResponse.hits.hits.[0]._type}}{{#if primaryResponse.hits.hits.[0]._source.header_background}} splash-image-background{{/if}}" style="background-image: {{#if primaryResponse.hits.hits.[0]._source.header_background_gradient}}linear-gradient(185deg,var(--mdc-theme-primary-fade),var(--mdc-theme-primary-dark)75%),{{else}}{{#if primaryResponse.hits.hits.[0]._source.header_background}}{{else}}linear-gradient(var(--mdc-theme-primary-fade),var(--mdc-theme-primary-fade)),{{/if}}{{/if}}url('{{#if primaryResponse.hits.hits.[0]._source.header_background}}{{primaryResponse.hits.hits.[0]._source.header_background}}{{else}}{{#if supplimentaryResponses.splash.hits.hits.[0]._source.original_image}}{{supplimentaryResponses.splash.hits.hits.[0]._source.original_image}}{{/if}}{{/if}}');">
    <div class="container-fluid">
        <div class="mdc-layout-grid">
            {{#if primaryResponse.hits.hits.[0]._source.header_text}}
            <img src="{{primaryResponse.hits.hits.[0]._source.header_text}}" alt="{{primaryResponse.hits.hits.[0]._source.title}}" class="header-text" />
            {{else}}
            <h1 class="header-text">
                <span class="header-text-banner">
                    Evidence Library
                </span>
            </h1>
            {{/if}}
        </div>
    </div>
</div>

<div class="container-fluid">
    <ul class="breadcrumb">
        <li><a href="/">Home</a></li>
        <li><a href="/policy-research">Policy &amp; research</a></li>
    </ul>

    <div class="mdc-layout-grid">
        <div class="mdc-layout-grid__inner">
            <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-3 sidebar library-sidebar">
                <form [searchroute]="'evidence-library'">
                    <div class="mdc-textfield mdc-textfield--upgraded" data-mdc-auto-init="MDCTextfield">
                        <input type="text" class="mdc-textfield__input" name="q" id="evidence-library-keywords" value="{{params.query.q}}">
                        <label class="mdc-textfield__label" for="evidence-library-keywords">Keywords</label>
                        <div class="mdc-textfield__bottom-line"></div>
                    </div>
                    <div class="mdc-form-field">
                        <select class="mdc-select" role="listbox" id="evidence-library-classification" name="classification">
                            <option value="" {{#if params.query.classification}}{{else}}selected{{/if}}>All categories</option>
                            {{#each supplimentaryResponses.types.aggregations.types.buckets}}
                            <option value="{{slugify key}}" {{#compare ../params.query.classification "===" (slugify key)}}selected{{/compare}}>{{key}} ({{doc_count}})</option>
                            {{/each}}
                        </select>
                    </div>
                    <button class="mdc-button mdc-button--raised" type="submit">
                        Search
                    </button>
                </form>
            </div>
            <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-9 content library-content">
                {{#each primaryResponse.hits.hits}}
                {{#if _source.rendered.search_result_scvo}}
                {{{_source.rendered.search_result_scvo}}}
                {{else}}
                {{#if _source.rendered.search_result}}
                {{{_source.rendered.search_result}}}
                {{/if}}
                {{/if}}
                {{/each}}

                <ul class="pagination inline-list">
                    {{#if paging.prevPage}}
                    <li>
                        <a class="mdc-button mdc-button--compact" href="/policy-research/evidence-library/?{{{querystringify ../params.query page=paging.prevPage}}}">Previous</a>
                    </li>
                    {{/if}}
                    {{#each paging.pageRange}}
                    <li class="{{#compare ../paging.currentPage "===" this.pageNumber}}current-page{{/compare}} pagination-distance-{{this.distance}}">
                        <a  class="mdc-button mdc-button--compact" href="/policy-research/evidence-library/?{{{querystringify ../params.query page=this.pageNumber}}}">{{this.pageNumber}}</a>
                    </li>
                    {{/each}}
                    {{#if paging.nextPage}}
                    <li>
                        <a class="mdc-button mdc-button--compact" href="/policy-research/evidence-library/?{{{querystringify ../params.query page=paging.nextPage}}}">Next</a>
                    </li>
                    {{/if}}
                </ul>
            </div>
        </div>
    </div>
</div>
