<div class="splash-image splash-image-evidence-library{{#if primaryResponse.hits.hits.[0]._source.featured_image}} splash-image-featured{{/if}}" style="background-image: {{#if primaryResponse.hits.hits.[0]._source.featured_image}}{{else}}linear-gradient(10deg, var(--mdc-theme-primary-dark) 0%, var(--mdc-theme-primary-fade) 50%, rgba(0,0,0,0.2) 100%),{{/if}}url('{{#if primaryResponse.hits.hits.[0]._source.featured_image}}{{primaryResponse.hits.hits.[0]._source.featured_image.sizes.full.source_url}}{{else}}{{#if supplimentaryResponse.splash.hits.hits.[0]._source.original_image}}{{supplimentaryResponse.splash.hits.hits.[0]._source.original_image}}{{/if}}{{/if}}');{{#if primaryResponse.hits.hits.[0]._source.featured_image}} max-height:{{primaryResponse.hits.hits.[0]._source.featured_image.sizes.full.height}}px;{{/if}}">
    <div class="container-fluid">
        <div class="mdc-layout-grid">
            <h1 class="evidence-library-title">{{{primaryResponse.hits.hits.[0]._source.title}}}</h1>
        </div>
    </div>
</div>

<div class="container-fluid">
    <ul class="breadcrumb">
        <li><a href="/">Home</a></li>
        <li><a href="/policy-research">Policy &amp; research</a></li>
    </ul>
    <div class="v-margin">
        <div class="mdc-card">
            <section class="mdc-card__primary">
                <h2 class="mdc-card__title mdc-card__title--large">Evidence Library</h2>
                <form [searchroute]="'evidence-librarys'">
                    <div class="mdc-layout-grid">
                        <div class="mdc-layout-grid__inner">
                            <div class="mdc-layout-grid__cell">
                                <div class="mdc-textfield mdc-textfield--upgraded" data-mdc-auto-init="MDCTextfield">
                                    <input type="text" class="mdc-textfield__input" name="q" id="evidence-librarys-keywords" value="{{params.query.q}}">
                                    <label class="mdc-textfield__label" for="evidence-librarys-keywords">Keywords</label>
                                    <div class="mdc-textfield__bottom-line"></div>
                                </div>
                            </div>
                            <div class="mdc-layout-grid__cell">
                                <div class="mdc-form-field">
                                    <select class="mdc-select" role="listbox" id="evidence-librarys-type" name="type">
                                        <option value="" {{#if params.query.type}}{{else}}selected{{/if}}>Select document type</option>
                                        {{#each supplimentaryResponse.types.aggregations.types.buckets}}
                                            <option value="{{key}}" {{#compare ../params.query.type "===" key}}selected{{/compare}}>{{key}} ({{doc_count}})</option>
                                        {{/each}}
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                    <button class="mdc-button mdc-button--raised" type="submit">
                        Search
                    </button>
                </form>
            </section>
        </div>
    </div>

    {{#each primaryResponse.hits.hits}}
        <div class="v-margin">
            {{#if _source.rendered.search_result_scvo}}
                {{{_source.rendered.search_result_scvo}}}
            {{else}}
                {{#if _source.rendered.search_result}}
                    {{{_source.rendered.search_result}}}
                {{/if}}
            {{/if}}
        </div>
    {{/each}}

    <div class="v-margin">
        <ul class="pagination inline-list">
            {{#if paging.prevPage}}
                <li>
                    <a class="mdc-button mdc-button--compact" href="/search?q={{../params.query.q}}&page={{paging.prevPage}}">Previous</a>
                </li>
            {{/if}}

            {{#each paging.pageRange}}
                <li class="{{#compare ../paging.currentPage "===" this.pageNumber}}current-page{{/compare}} pagination-distance-{{this.distance}}">
                    <a  class="mdc-button mdc-button--compact" href="/search?q={{../params.query.q}}&page={{this}}">{{this.pageNumber}}</a>
                </li>
            {{/each}}

            {{#if paging.nextPage}}
                <li>
                    <a class="mdc-button mdc-button--compact" href="/search?q={{../params.query.q}}&page={{paging.nextPage}}">Next</a>
                </li>
            {{/if}}
        </ul>
    </div>
</div>
