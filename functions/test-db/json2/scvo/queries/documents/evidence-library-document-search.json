{
    "size": 10,
    "from": {{multiply (subtract (default query.page 1) 1) 10}},
    "_source": [
        "rendered.scvo_list",
        "rendered.json_ld"
    ],
    "query": {
        "function_score": {
        	"query": {
	        	"bool": {
                    "must": [
                        {{#if query.classification}}
                        {
                            "term": {
                                "library_classification_slug": "{{query.classification}}"
                            }
                        },
                        {{/if}}
                        {{#if query.q}}
                        {
                            "query_string": {
                                "query": "{{query.q}}",
                                "default_operator": "AND",
                                "analyzer": "snowball"
                            }
                        }
                        {{else}}
                		{
                			"match_all": {}
                		}
                        {{/if}}
                    ]
                }
            },
            "boost_mode": "multiply",
            "functions": [
                {
                    "weight": "8",
                    "gauss": {
                        "when_posted": {
                            "scale": "84d",
                            "decay": "0.1"
                        }
                    }
                }
            ]
        }
    }
}
